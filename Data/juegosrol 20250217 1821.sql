--
-- Script was generated by Devart dbForge Studio for MySQL, Version 8.0.40.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 17/02/2025 18:21:14
-- Server version: 
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

--
-- Set default database
--
USE juegosrol;

--
-- Drop table `juegan`
--
DROP TABLE IF EXISTS juegan;

--
-- Drop table `clases`
--
DROP TABLE IF EXISTS clases;

--
-- Drop table `personajes`
--
DROP TABLE IF EXISTS personajes;

--
-- Drop table `jugadores`
--
DROP TABLE IF EXISTS jugadores;

--
-- Drop table `modulos`
--
DROP TABLE IF EXISTS modulos;

--
-- Drop table `partidas`
--
DROP TABLE IF EXISTS partidas;

--
-- Drop table `juegos`
--
DROP TABLE IF EXISTS juegos;

--
-- Set default database
--
USE juegosrol;

--
-- Create table `juegos`
--
CREATE TABLE juegos (
  idjuegos int(11) NOT NULL AUTO_INCREMENT,
  nombre varchar(30) DEFAULT NULL,
  tematica varchar(50) DEFAULT NULL,
  edicion varchar(10) DEFAULT NULL,
  PRIMARY KEY (idjuegos)
)
ENGINE = INNODB,
AUTO_INCREMENT = 6,
AVG_ROW_LENGTH = 3276,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `partidas`
--
CREATE TABLE partidas (
  idpartidas int(11) NOT NULL AUTO_INCREMENT,
  idjuegos int(11) DEFAULT NULL,
  nombre varchar(30) DEFAULT NULL,
  fechainicio date DEFAULT NULL,
  fechafin date DEFAULT NULL,
  nombre_equipo varchar(20) DEFAULT NULL,
  PRIMARY KEY (idpartidas)
)
ENGINE = INNODB,
AUTO_INCREMENT = 6,
AVG_ROW_LENGTH = 3276,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE partidas
ADD CONSTRAINT fk_juegos_partidas FOREIGN KEY (idjuegos)
REFERENCES juegos (idjuegos);

--
-- Create table `modulos`
--
CREATE TABLE modulos (
  idmodulos int(11) NOT NULL AUTO_INCREMENT,
  idjuegos int(11) DEFAULT NULL,
  nombre varchar(50) DEFAULT NULL,
  edicion varchar(10) DEFAULT NULL,
  PRIMARY KEY (idmodulos)
)
ENGINE = INNODB,
AUTO_INCREMENT = 6,
AVG_ROW_LENGTH = 3276,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE modulos
ADD CONSTRAINT fk_juegos_modulos FOREIGN KEY (idjuegos)
REFERENCES juegos (idjuegos);

--
-- Create table `jugadores`
--
CREATE TABLE jugadores (
  idjugadores int(11) NOT NULL AUTO_INCREMENT,
  nombre varchar(30) DEFAULT NULL,
  rol varchar(20) DEFAULT NULL,
  PRIMARY KEY (idjugadores)
)
ENGINE = INNODB,
AUTO_INCREMENT = 6,
AVG_ROW_LENGTH = 3276,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `personajes`
--
CREATE TABLE personajes (
  idpersonajes int(11) NOT NULL AUTO_INCREMENT,
  idjugadores int(11) DEFAULT NULL,
  nombre varchar(30) DEFAULT NULL,
  master tinyint(1) DEFAULT NULL,
  PRIMARY KEY (idpersonajes)
)
ENGINE = INNODB,
AUTO_INCREMENT = 6,
AVG_ROW_LENGTH = 3276,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE personajes
ADD CONSTRAINT fk_jugadores_personajes FOREIGN KEY (idjugadores)
REFERENCES jugadores (idjugadores);

--
-- Create table `clases`
--
CREATE TABLE clases (
  idpersonajes int(11) NOT NULL,
  clases varchar(20) NOT NULL,
  PRIMARY KEY (idpersonajes, clases)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 2730,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE clases
ADD CONSTRAINT fk_clases_personajes FOREIGN KEY (idpersonajes)
REFERENCES personajes (idpersonajes);

--
-- Create table `juegan`
--
CREATE TABLE juegan (
  idjuegan int(11) NOT NULL AUTO_INCREMENT,
  idpartidas int(11) DEFAULT NULL,
  idjugadores int(11) DEFAULT NULL,
  PRIMARY KEY (idjuegan)
)
ENGINE = INNODB,
AUTO_INCREMENT = 11,
AVG_ROW_LENGTH = 1638,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create index `idpartidas` on table `juegan`
--
ALTER TABLE juegan
ADD UNIQUE INDEX idpartidas (idpartidas, idjugadores);

--
-- Create foreign key
--
ALTER TABLE juegan
ADD CONSTRAINT fk_juegan_jugadores FOREIGN KEY (idjugadores)
REFERENCES jugadores (idjugadores);

--
-- Create foreign key
--
ALTER TABLE juegan
ADD CONSTRAINT fk_juegan_partidas FOREIGN KEY (idpartidas)
REFERENCES partidas (idpartidas);

-- 
-- Dumping data for table juegos
--
INSERT INTO juegos VALUES
(1, 'Dungeons & Dragons', 'Fantasía medieval', '5e'),
(2, 'Cyberpunk 2020', 'Ciencia ficción', '2020'),
(3, 'Vampiro: La Mascarada', 'Horror gótico', '20 Anivers'),
(4, 'La Llamada de Cthulhu', 'Terror cósmico', '7a'),
(5, 'Pathfinder', 'Fantasía medieval', '2e');

-- 
-- Dumping data for table partidas
--
INSERT INTO partidas VALUES
(1, 1, 'Exploradores de Barovia', '2024-01-01', '2024-03-01', 'Los Valientes'),
(2, 2, 'Hackers en Night City', '2024-02-15', '2024-04-15', 'CyberRunners'),
(3, 3, 'Caza de Sangre', '2024-03-10', '2024-05-10', 'Los Condenados'),
(4, 4, 'Locura en Arkham', '2024-04-20', '2024-06-20', 'Los Inquisitivos'),
(5, 5, 'La última cruzada', '2024-05-05', '2024-07-05', 'Caballeros Perdidos');

-- 
-- Dumping data for table jugadores
--
INSERT INTO jugadores VALUES
(1, 'Carlos', 'Jugador'),
(2, 'Andrea', 'Master'),
(3, 'Luis', 'Jugador'),
(4, 'Marta', 'Jugador'),
(5, 'Javier', 'Master');

-- 
-- Dumping data for table personajes
--
INSERT INTO personajes VALUES
(1, 1, 'Thorin Martillo de Hierro', 0),
(2, 2, 'Morgana la Hechicera', 1),
(3, 3, 'Raiden el Asesino', 0),
(4, 4, 'Samantha la Psíquica', 0),
(5, 5, 'Dante el Caballero Oscuro', 1);

-- 
-- Dumping data for table modulos
--
INSERT INTO modulos VALUES
(1, 1, 'Curse of Strahd', '5e'),
(2, 2, 'Night City', '2020'),
(3, 3, 'Chicago by Night', '20 Anivers'),
(4, 4, 'Las sombras de Yog-Sothoth', '7a'),
(5, 5, 'Kingmaker', '2e');

-- 
-- Dumping data for table juegan
--
INSERT INTO juegan VALUES
(1, 1, 1),
(2, 1, 2),
(3, 2, 3),
(4, 2, 4),
(6, 3, 1),
(5, 3, 5),
(7, 4, 2),
(8, 4, 3),
(9, 5, 4),
(10, 5, 5);

-- 
-- Dumping data for table clases
--
INSERT INTO clases VALUES
(1, 'Bárbaro'),
(1, 'Guerrero'),
(2, 'Mago'),
(3, 'Asesino'),
(4, 'Psíquico'),
(5, 'Caballero Oscuro');

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS */;